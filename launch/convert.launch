<launch>
	<arg name="ns" default="LO01" />
	<param name="/use_sim_time" value="true" />

	<node pkg="tf" type="static_transform_publisher" name="tf_world_map" args="0 0 0 0 0 0 world map 10" />
	<node pkg="tf" type="static_transform_publisher" name="base2LO01" args="0 0 0 0 0 0 $(arg ns)_base_link $(arg ns) 1" />
	<node pkg="tf" type="static_transform_publisher" name="loomo2camera" args="0 0 0 -1.571 0 -1.571 LO01_rsdepth_center_neck_fix_frame LO01_rs_depth_optical_frame 1" />

	<!-- Publishing Odometry based on pose topic -->
	<node name="loomo_convert" pkg="loomo_convert" type="convert.py" output="screen" ns="$(arg ns)">
		<remap from="~pose_topic" to="pose" />
		<remap from="~odom_topic" to="odom" />
		<remap from="~state_topic" to="state" />
		<remap from="~mono16_depth_topic" to="realsense_loomo/depth" />
		<remap from="~final_depth_topic" to="realsense_loomo/depth_new_encoding" />
		<remap from="~camera_info_topic" to="realsense_loomo/depth/camera_info" />
		<remap from="~updated_camera_info_topic" to="realsense_loomo/camera_info" />
	</node>

	<!-- Visualize depth image as point cloud -->
	<node pkg="nodelet" type="nodelet" name="standalone_nodelet" args="manager" output="screen" ns="$(arg ns)"/>
        <node pkg="nodelet" type="nodelet" name="points_xyz" args="load depth_image_proc/point_cloud_xyz standalone_nodelet --no-bond" ns="$(arg ns)">
                <remap from="camera_info" to="realsense_loomo/camera_info"/>
		<remap from="image_rect" to="realsense_loomo/depth_new_encoding"/>
        </node>

</launch>
